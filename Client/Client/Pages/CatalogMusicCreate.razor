@page "/CreateCatalogMusic"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]


<PageTitle>Crear Catalogo</PageTitle>

<div class="w-full px-10 inline-flex my-5">
    <div class="md:w-2/3 h-full">
        <div class="text-2xl text-center font-semibold my-2.5">
            <h1>Agregar nuevo catálogo</h1>
        </div>
        <hr/>
        <div class="flex justify-center space-x-3 p-2 my-2.5">
            <button @onclick="() => ShowModalNewArtist = !ShowModalNewArtist" class="w-36 h-10 border rounded-xl font-semibold text-white bg-blue-600 text-sm">
                Artista
            </button>
            <button @onclick="() => ShowModalNewGenre = !ShowModalNewGenre" class="w-36 h-10 border rounded-xl font-semibold text-white bg-blue-600 text-sm">
                Género
            </button>
            <button @onclick="() => ShowModalNewFormat = !ShowModalNewFormat" class="w-36 h-10 border rounded-xl font-semibold text-white bg-blue-600 text-sm">
                Formato
            </button>
            <button @onclick="() => ShowModalNewPresentation = !ShowModalNewPresentation" class="w-36 h-10 border rounded-xl font-semibold text-white bg-blue-600 text-sm">
                Presentación
            </button>
        </div>
        <hr/>
        <div class="flex flex-wrap">
            <div class="w-full md:w-1/2 md:p-5 space-y-5">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Título</label>
                    <input @bind="NewMusicCatalog.Title" type="text" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Artista</label>
                    <select @bind="NewMusicCatalog.ArtistId" class="w-full border rounded border-gray-300">
                        <option value="0">Seleccione una opción</option>
                        @foreach (var artist in Artists)
                        {
                            <option value="@artist.Id">@artist.Name</option>
                        }
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Género</label>
                    <select @bind="NewMusicCatalog.GenreId" class="w-full border rounded border-gray-300">
                        <option value="0">Seleccione una opción</option>
                        @foreach (var genre in Genres)
                        {
                            <option value="@genre.Id">@genre.Name</option>
                        }
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Origen</label>
                    <input @bind="NewMusicCatalog.Country" type="text" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Formato</label>
                    <select @bind="NewMusicCatalog.FormatId" class="w-full border rounded border-gray-300">
                        <option value="0">Seleccione una opción</option>
                        @foreach (var format in Formats)
                        {
                            <option value="@format.Id">@format.Name</option>
                        }
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Presentación</label>
                    <select @bind="NewMusicCatalog.PresentationId" class="w-full border rounded border-gray-300">
                        <option value="0">Seleccione una opción</option>
                        @foreach (var presentation in Presentations)
                        {
                            <option value="@presentation.Id">@presentation.Name</option>
                        }
                    </select>
                </div>
            </div>
            <div class="w-full md:w-1/2 md:p-5 space-y-5">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Etiqueta</label>
                    <input @bind="NewMusicCatalog.Label" type="text" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Año</label>
                    <input @bind="NewMusicCatalog.Year" type="number" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Matriz</label>
                    <input @bind="NewMusicCatalog.Matrix" type="text" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Estado de portada</label>
                    <input @bind="NewMusicCatalog.StatusCover" type="number" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Estado del disco</label>
                    <input @bind="NewMusicCatalog.StatusGeneral" type="number" class="w-full border rounded border-gray-300"/>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Precio</label>
                    <input @bind="NewMusicCatalog.Price" type="number" class="w-full border rounded border-gray-300"/>
                </div>
            </div>
        </div>
    </div>
    <div class="border-1 md:w-1/3 mx-auto">
        <div class="flex place-items-center">
            @if (PhotoMusicCatalogBase64.Any())
            {
                <img src="@PhotoMusicCatalogBase64.FirstOrDefault()" class="w-full sm:64 md:h-96" alt="">
            }
            else
            {
                <img v-else src="https://rental.servicevision.es/wp-content/uploads/2019/05/default.jpg" class="w-full sm:64 md:h-96" alt="">
            }
        </div>
        <div class="sm:inline-flex w-full">
            <div class="md:w-1/2 border p-5 h-32">
                @if (PhotoMusicCatalogBase64?.Count() > 0)
                {
                    <div class="grid grid-cols-3 border">
                        @foreach (var photo in PhotoMusicCatalogBase64)
                        {
                            <img class="w-16 h-16" src="@photo" alt="">
                        }
                    </div>
                }
            </div>
            <div class="flex flex-col md:w-1/2 h-32 sm:w-full relative cursor-pointer mx-auto justify-center items-center border border-gray-600 border-dotted">
                <InputFile OnChange="@SaveImageMusicCatalogNew" multiple class="absolute opacity-0 w-full h-full"/>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 absolute">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/>
                </svg>
            </div>
        </div>
        <div class="block space-y-2 mt-3">
            <button disabled="@(!PhotoMusicCatalog.Any())" @onclick="() => CreateCatalogMusics()" class="w-full h-10 border rounded-xl font-semibold text-white bg-green-600">Agregar</button>
        </div>
    </div>
</div>


<Modal IsOpenModal="ShowModalNewArtist">
    <BodyContent>
        <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-title">Crear Nuevo Artista</h3>
        <div class="mt-5">
            <div>
                <label class="block text-sm font-medium text-gray-700">Nombre</label>
                <input @bind="NewArtist.Name" type="text" class="w-full border rounded border-gray-300"/>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">País</label>
                <input @bind="NewArtist.Country" type="text" class="w-full border rounded border-gray-300"/>
            </div>
        </div>
        <div class="flex flex-col mt-5 h-32 w-full relative cursor-pointer mx-auto justify-center items-center border border-gray-600 border-dotted">
            <InputFile OnChange="@SaveImageArtistNew" class="absolute opacity-0 w-full h-full"/>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 absolute">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/>
            </svg>
        </div>
    </BodyContent>
    <FooterContent>
        <button @onclick="() => CreateArtist()" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
        <button @onclick="() => ShowModalNewArtist = !ShowModalNewArtist" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
    </FooterContent>
</Modal>

<Modal IsOpenModal="ShowModalNewGenre">
    <BodyContent>
        <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-new-genre">Crear Nuevo Genero</h3>
        <div class="mt-5">
            <div>
                <label class="block text-sm font-medium text-gray-700">Nombre</label>
                <input @bind="NewGenre.Name" type="text" class="w-full border rounded border-gray-300"/>
            </div>
        </div>
    </BodyContent>
    <FooterContent>
        <button @onclick="() => CreateGenre()" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
        <button @onclick="() => ShowModalNewGenre = !ShowModalNewGenre" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
    </FooterContent>
</Modal>


<Modal IsOpenModal="ShowModalNewFormat">
    <BodyContent>
        <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-new-format">Crear Nuevo Formato</h3>
        <div class="mt-5">
            <div>
                <label class="block text-sm font-medium text-gray-700">Nombre</label>
                <input @bind="NewFormat.Name" type="text" class="w-full border rounded border-gray-300"/>
            </div>
        </div>
    </BodyContent>
    <FooterContent>
        <button @onclick="() => CreateFormat()" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
        <button @onclick="() => ShowModalNewFormat = !ShowModalNewFormat" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
    </FooterContent>
</Modal>


<Modal IsOpenModal="ShowModalNewPresentation">
    <BodyContent>
        <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-new-presentation">Crear Nuevo Presentacion</h3>
        <div class="mt-5">
            <div>
                <label class="block text-sm font-medium text-slate-700">Formato</label>
                <select @bind="NewPresentation.FormatId" class="w-full border rounded border">
                    <option value="0">Seleccione una opcion</option>
                    @foreach (var format in Formats)
                    {
                        <option value="@format.Id">@format.Name</option>
                    }
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Nombre</label>
                <input @bind="NewPresentation.Name" type="text" class="w-full border rounded border-gray-300"/>
            </div>
        </div>
    </BodyContent>
    <FooterContent>
        <button @onclick="() => CreatePresentation()" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
        <button @onclick="() => ShowModalNewPresentation = !ShowModalNewPresentation" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
    </FooterContent>
</Modal>