@page "/CreateCatalogMusic"

<NavBar></NavBar>

<div class="mt-7">
    <div class="w-full px-10 md:flex">
        <div class="my-auto text-2xl text-center font-semibold">
            <h1>Agregar nuevo catalogo</h1>
        </div>
        <div class="my-5 grid grid-cols-2 md:inline-flex md:mx-auto md:space-x-3">
            <button @onclick="(() => ShowModalNewArtist = !ShowModalNewArtist)" class=" w-36 h-10 border rounded-xl font-semibold text-zinc-200 bg-zinc-600 text-sm">Agregar Artista</button>
            <button @onclick="(() => ShowModalNewGenre = !ShowModalNewGenre)" class=" w-36 h-10 border rounded-xl font-semibold text-zinc-200 bg-zinc-600 text-sm">Agregar Genero</button>
            <button @onclick="(() => ShowModalNewFormat = !ShowModalNewFormat)" class=" w-36 h-10 border rounded-xl font-semibold text-zinc-200 bg-zinc-600 text-sm">Agregar Formato</button>
            <button @onclick="(() => ShowModalNewPresentation = !ShowModalNewPresentation)" class=" w-36 h-10 border rounded-xl font-semibold text-zinc-200 bg-zinc-600 text-sm">Agregar Presentacion</button>
        </div>
    </div>
        
    <div class="w-full md:inline-flex md:space-x-10 px-10">
        <div class="md:w-1/3">
            <div>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Titulo</span>
                    <input @bind="NewMusicCatalog.Title" type="text" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Artista</span>
                    <select @bind="NewMusicCatalog.ArtistId" class="w-full rounded border">
                        <option value="0">Seleccione una opcion</option>
                        @foreach (var artist in Artists)
                        {
                            <option value="@artist.Id">@artist.Name</option>
                        }
                    </select>
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Genero</span>
                    <select @bind="NewMusicCatalog.GenreId" class="w-full rounded border">
                        <option value="0">Seleccione una opcion</option>
                        @foreach (var genre in Genres)
                        {
                            <option value="@genre.Id">@genre.Name</option>
                        }                        
                    </select>
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
            </div>
            <div>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Origen</span>
                    <input @bind="NewMusicCatalog.Country" type="text" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Formato</span>
                    <select @bind="NewMusicCatalog.FormatId" class="w-full rounded border">
                        <option value="0">Seleccione una opcion</option>
                        @foreach (var format in Formats)
                        {
                            <option value="@format.Id">@format.Name</option>
                        }
                    </select>
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Presentacion</span>
                    <select @bind="NewMusicCatalog.PresentationId" class="w-full rounded border">
                        <option value="0">Seleccione una opcion</option>
                        @foreach (var presentation in Presentations)
                        {
                            <option value="@presentation.Id">@presentation.Name</option>
                        }
                    </select>
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
            </div>
        </div>
        <div class="md:w-1/3">
            <div>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Etiqueta</span>
                    <input @bind="NewMusicCatalog.Label" type="text" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Año</span>
                    <input @bind="NewMusicCatalog.Year" type="number" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Matriz</span>
                    <input @bind="NewMusicCatalog.Matrix" type="text" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
            </div>
            <div>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Estado de portada</span>
                    <input @bind="NewMusicCatalog.StatusCover" type="number" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Estado del disco</span>
                    <input @bind="NewMusicCatalog.StatusGeneral" type="number" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">
                        Please provide a valid title.
                    </p>
                </label>
                <label>
                    <span class="block text-sm font-medium text-slate-700">Precio</span>
                    <input @bind="NewMusicCatalog.Price" type="number" class="w-full rounded border" />
                    <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                </label>
            </div>
        </div>
        <div class="md:w-1/3 mt-10">
            <div class="flex w-72 md:h-72 md:w-full place-items-center">
                @if(NewMusicCatalog.Images?.Count() > 0)
                {
                    <img src="PhotoCatalogMusic.Add(file);.FirstOrDefault().Url" alt="">
                }
                else
                {
                    <img v-else src="https://rental.servicevision.es/wp-content/uploads/2019/05/default.jpg" alt="">
                }                                
            </div>
            <div class="sm:inline-flex w-full mt-20">
                <div class="md:w-1/2 border">
                    @if (NewMusicCatalog.Images?.Count() > 0)
                    {
                        <div class="grid grid-cols-3 border">
                            @foreach(var photo in PhotoCatalogMusic)
                            {
                                <img class="w-16 h-16" src="@photo" alt="">
                            }                            
                        </div>
                    }
                </div>
                <div class="md:w-1/2">
                    <InputFile OnChange="@SaveImageNew" multiple />
                    <div class="flex flex-col h-32 sm:w-full md:w-52 mx-auto justify-center items-center border border-gray-600 border-dotted ">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 absolute">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                        </svg>
                    </div>
                </div>
            </div>
            <div class="block space-y-2 mt-3">
                <button disabled="@(!PhotoCatalogMusic.Any())" @onclick="(() => CreateCatalogMusics())" class="bg-gray-300 w-full border">Agregar</button>
            </div>
        </div>
    </div>
</div>


@if (ShowModalNewArtist)
{
    <div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center w-full sm:mt-0 sm:ml-4 sm:text-left">
                                <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-title">Crear Nuevo Artista</h3>
                                <div class="mt-5">
                                    <label>
                                        <span class="block text-sm font-medium text-slate-700">Nombre</span>
                                        <input @bind="NewArtist.Name" type="text" class="w-full rounded border" />
                                        <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                                    </label>
                                    <label>
                                        <span class="block text-sm font-medium text-slate-700">Pais</span>
                                        <input @bind="NewArtist.Country" type="text" class="w-full rounded border" />
                                        <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button @onclick="(() => ShowModalNewArtist = !ShowModalNewArtist)" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
                        <button @onclick="(() => CreateArtist())" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (ShowModalNewGenre)
{
    <div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center w-full sm:mt-0 sm:ml-4 sm:text-left">
                                <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-title">Crear Nuevo Genero</h3>
                                <div class="mt-5">
                                    <label>
                                        <span class="block text-sm font-medium text-slate-700">Nombre</span>
                                        <input @bind="NewGenre.Name" type="text" class="w-full rounded border" />
                                        <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button @onclick="(() => ShowModalNewGenre = !ShowModalNewGenre)" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
                        <button @onclick="(() => CreateGenre())" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if (ShowModalNewFormat)
{
    <div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center w-full sm:mt-0 sm:ml-4 sm:text-left">
                                <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-title">Crear Nuevo Formato</h3>
                                <div class="mt-5">
                                    <label>
                                        <span class="block text-sm font-medium text-slate-700">Nombre</span>
                                        <input @bind="NewFormat.Name" type="text" class="w-full rounded border" />
                                        <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button @onclick="(() => ShowModalNewFormat = !ShowModalNewFormat)" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
                        <button @onclick="(() => CreateFormat())" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

@if(ShowModalNewPresentation)
{
    <div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center w-full sm:mt-0 sm:ml-4 sm:text-left">
                                <h3 class="font-semibold text-2xl text-center leading-6 text-gray-900" id="modal-title">Crear Nueva Presentacion</h3>
                                <div class="mt-5">
                                    <label>
                                        <span class="block text-sm font-medium text-slate-700">Formato</span>
                                        <select @bind="NewPresentation.FormatId" class="w-full rounded border">
                                            <option value="0">Seleccione una opcion</option>
                                            @foreach (var format in Formats)
                                            {
                                                <option value="@format.Id">@format.Name</option>
                                            }                                                                                        
                                        </select>
                                        <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                                    </label>
                                    <label>
                                        <span class="block text-sm font-medium text-slate-700">Nombre</span>
                                        <input @bind="NewPresentation.Name" type="text" class="w-full rounded border" />
                                        <p class="mt-2 invisible peer-invalid:visible text-red-500 text-sm">Please provide a valid title.</p>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-1 sm:flex sm:flex-row-reverse sm:px-6">
                        <button @onclick="(() => ShowModalNewPresentation = !ShowModalNewPresentation)" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-red-400 sm:mt-0 sm:w-auto">Cancelar</button>
                        <button @onclick="CreatePresentation" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}